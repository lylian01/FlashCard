@using X.PagedList
@using X.PagedList.Mvc.Core
@model IPagedList<User>

@{
    ViewData["Title"] = "UsersIndex";
}
<style>
    .tableCus {
        border: 2px solid var(--secondary-dark);
        margin-bottom: 10px;
    }

    .cardCus:hover {
        transform: translateY(-6px);
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(212, 175, 55, 0.3), inset 0 0 100px rgba(255, 255, 255, 0.2);
    }

    a {
        text-decoration: none;
        color: black;
    }

    .pagination {
        display: flex;
        justify-content: center;
        margin-top: 30px;
    }

    .page-link {
        background: var(--secondary);
        color: white;
        border: 1px solid var(--accent);
    }

    li.page-item {
        color: white;
    }

    .page-item.active .page-link {
        background: var(--secondary);
        color: var(--accent-dark);
        border: 1px solid var(--accent);
        font-weight: bold;
    }

    li.page-item a:hover {
        border: 1px solid var(--accent);
        background: var(--primary);
        color: var(--accent-dark);
        font-weight: bold;
    }

    .modalCus {
        cursor: pointer;
    }

        .modalCus:hover {
            color: #0a58ca;
        }
    a{
                text-decoration: none;
        color: black;
    }
    
</style>

<h3 class="mb-4" style="color:var(--accent-dark)">List Users</h3>

<table class="table table-striped table-hover table-light tableCus">
    <thead>
        <tr>
            <th>
                Username
            </th>
            <th>
                Email
            </th>
            <th>
                Password
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Username)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Password)
            </td>
                @if(item.Email == "admin@gmail.com")
                {
                    <td> Ko có quyền thực hiện thao tác với tài khoản admin</td>
                }
                else
                {
                    <td>
                        <a asp-action="Edit" asp-route-id="@item.UserId">Edit</a> |
                        <span class="modalCus" data-bs-toggle="modal" data-bs-target="#deleteModal"
                              onclick="setDeleteId('@item.UserId','@item.Username')">
                            Delete
                        </span>
                    </td>
                }
        </tr>
}
    </tbody>
</table>
@if (Model.PageCount > 1)
{
    @Html.PagedListPager(
Model,
page => Url.Action("UsersIndex", new { page }),
    new PagedListRenderOptions
    {
        UlElementClasses = new[] { "pagination", "justify-content-center" },
        LiElementClasses = new[] { "page-item" },
        PageClasses = new[] { "page-link" }
    }
)

}

<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-title p-4">
                <h1 class="fs-5">Are you sure you want to delete  </h1>
                user 
                <span id="userName" class="fs-4"></span>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <form asp-action="Delete" method="post">
                    <input type="hidden" name="id" id="deleteId" />
                    <input type="submit" value="Delete" class="btn btn-danger" />
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function setDeleteId(id,name){
        document.getElementById("deleteId").value = id;
        document.getElementById("userName").innerText = name;
    }
</script>


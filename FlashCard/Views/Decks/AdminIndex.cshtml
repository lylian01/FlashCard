@using X.PagedList
@using X.PagedList.Mvc.Core
@model IPagedList<Deck>

@{
    ViewData["Title"] = "AdminIndex";
}
<style>
    .tableCus {
        border: 2px solid var(--secondary-dark);
        margin-bottom: 10px;
    }

    .cardCus:hover {
        transform: translateY(-6px);
        box-shadow: 0 30px 80px rgba(0, 0, 0, 0.2), 0 0 0 1px rgba(212, 175, 55, 0.3), inset 0 0 100px rgba(255, 255, 255, 0.2);
    }

    a {
        text-decoration: none;
        color: black;
    }
    .pagination {
        display: flex;
        justify-content: center;
        margin-top: 30px;
    }

    .page-link {
        background: var(--secondary);
        color: white;
        border: 1px solid var(--accent);
    }

    li.page-item {
        color: white;
    }

    .page-item.active .page-link {
        background: var(--secondary);
        color: var(--accent-dark);
        border: 1px solid var(--accent);
        font-weight: bold;
    }

    li.page-item a:hover {
        border: 1px solid var(--accent);
        background: var(--primary);
        color: var(--accent-dark);
        font-weight: bold;
    }
    .modalCus {
        cursor: pointer;
    }

    .modalCus:hover {
        color: #0a58ca;
    }
</style>

<h3 class="mb-4" style="color:var(--accent-dark)">List Admin Deck</h3>

<table class="table table-striped table-hover table-light tableCus">
    <thead>
        <tr>
            <th scope="col">
                Deck
            </th>
            <th scope="col">
                FlashCard
            </th>
            <th scope="col">
                Description
            </th>
            <th scope="col">
                User
            </th>
            <th scope="col"></th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr>
            <td class="col-2">
                @Html.DisplayFor(modelItem => item.DeckName)
            </td>
            <td class="col-1">
                @item.Flashcards.Count
            </td>
            <td class="col-4 text-truncate " style="overflow: hidden;max-width:10px;">
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td class="col-3">
                @Html.DisplayFor(modelItem => item.User.Email)
            </td>
            <td class="col-2">
                <a asp-action="Edit" asp-route-id="@item.DeckId">Edit</a> |
                <a asp-action="Details" asp-route-id="@item.DeckId">Details</a> |
                    <span class="modalCus" data-bs-toggle="modal" data-bs-target="#deleteModal"
                          onclick="setDeleteId('@item.DeckId','@item.DeckName','@item.User.Username')">
                        Delete
                    </span>
            </td>
        </tr>
}
    </tbody>
</table>
@if (Model.PageCount > 1)
{
    @Html.PagedListPager(
Model,
page => Url.Action("AdminIndex", new { page }),
    new PagedListRenderOptions
    {
        UlElementClasses = new[] { "pagination", "justify-content-center" },
        LiElementClasses = new[] { "page-item" },
        PageClasses = new[] { "page-link" }
    }
)
}


<div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-title p-4">
                <h1 class="fs-5">Are you sure you want to delete  </h1>
                <span id="titleDeck" class="fs-4"></span>
                <h4>by <span id="userName"></span></h4>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <form asp-action="Delete" method="post">
                    <input type="hidden" name="id" id="deleteId" />
                    <input type="submit" value="Delete" class="btn btn-danger" />
                </form>
            </div>
        </div>
    </div>
</div>

<script>
    function setDeleteId(id,title,name){
        document.getElementById("deleteId").value = id;
        document.getElementById("titleDeck").innerText = title;
        document.getElementById("userName").innerText = name;
    }
</script>